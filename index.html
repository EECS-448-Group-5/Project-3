<!DOCTYPE html>
<html>
    <head>
        <title>Project 3 Testing</title>
        <script type="module">

            // import kaboom lib
            import kaboom from "https://unpkg.com/kaboom/dist/kaboom.mjs";
        
            // initialize kaboom context
            kaboom({background: [60,60,60]});
            loadSprite("player1","sprites/player1.png");


            function addButton(txt, p, f) {

                const btn = add([
                    text(txt),
                    pos(p),
                    area({ cursor: "pointer", }),
                    scale(1),
                    origin("center"),
                ])

                btn.onClick(f)

                btn.onUpdate(() => {
                    if (btn.isHovering()) {
                        const t = time() * 10
                        btn.color = rgb(
                            wave(0, 255, t),
                            wave(0, 255, t + 2),
                            wave(0, 255, t + 4),
                        )
                        btn.scale = vec2(1.2)
                    } else {
                        btn.scale = vec2(1)
                        btn.color = rgb()
                    }
                })

            }
            
           

            scene("main",() =>{

            addButton("Start", vec2(150, 300), () => debug.log("oh hi"));


            const speed = 200;

            let player = add([
                        sprite("player1"),
                        scale(0.25),
                        pos(550,500),
                        //move(player.pos.angle(enemy.pos), 100),
                        ])

            add([
                //initialize all components
                text("Project 3 testing"),
                pos(40, 80),
                scale(0.75)
            ]);
           
            
            
            /*keyDown('right', ()=>{
                player.move(speed,0)
            })*/

            const dirs = {
		"left": LEFT,
		"right": RIGHT,
		"up": UP,
		"down": DOWN,
	}

	for (const dir in dirs) {
		onKeyDown(dir, () => {
			player.move(dirs[dir].scale(speed))
		})
	}

})
            
        go("main",0)

            </script>
    </head>
</html>